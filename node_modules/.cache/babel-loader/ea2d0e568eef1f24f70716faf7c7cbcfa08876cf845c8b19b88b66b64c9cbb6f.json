{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import Chart from\"chart.js/auto\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Reports(){const[incomeList,setIncomeList]=useState([]);const[expensesList,setExpensesList]=useState([]);const[totalIncome,setTotalIncome]=useState(0);const[totalExpenses,setTotalExpenses]=useState(0);const[remainingBudget,setRemainingBudget]=useState(0);const chartRef=useRef(null);// Fetch data from localStorage\nuseEffect(()=>{// Fetch income and expenses lists\nconst incomeData=JSON.parse(localStorage.getItem(\"incomeList\"))||[];const expensesData=JSON.parse(localStorage.getItem(\"expensesList\"))||[];// Calculate total income and expenses\nconst totalIncome=incomeData.reduce((total,item)=>total+(item.amount||0),0);const totalExpenses=expensesData.reduce((total,item)=>total+(item.amount||0),0);// Calculate remaining budget\nconst remainingBudget=totalIncome-totalExpenses;// Update states\nsetIncomeList(incomeData);setExpensesList(expensesData);setTotalIncome(totalIncome);setTotalExpenses(totalExpenses);setRemainingBudget(remainingBudget);// Render chart\nrenderChart(totalIncome,totalExpenses,remainingBudget);},[]);// Render Chart\nconst renderChart=(income,expenses,remainingBudget)=>{const ctx=document.getElementById(\"myChart\");// Destroy existing chart\nif(chartRef.current){chartRef.current.destroy();}chartRef.current=new Chart(ctx,{type:\"bar\",data:{labels:[\"Income\",\"Expenses\",\"Remaining Budget\"],datasets:[{label:\"Amount (in Ksh)\",data:[income,expenses,remainingBudget],backgroundColor:[\"lightblue\",\"lightcoral\",\"lightgreen\"],borderColor:[\"blue\",\"red\",\"green\"],borderWidth:1}]},options:{responsive:true,maintainAspectRatio:false,scales:{y:{beginAtZero:true}}}});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{textAlign:\"center\",margin:\"20px auto\",maxWidth:\"400px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Spending Reports\"}),/*#__PURE__*/_jsx(\"div\",{style:{height:\"300px\"},children:/*#__PURE__*/_jsx(\"canvas\",{id:\"myChart\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"20px\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Your Total Income:\"}),\" \",totalIncome,\" Ksh\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Your Total Expenses:\"}),\" \",totalExpenses,\" Ksh\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Your Remaining Budget:\"}),\" \",remainingBudget,\" Ksh\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"center\",marginBottom:\"20px\"},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>renderChart(totalIncome,totalExpenses,remainingBudget),children:\"Refresh Report\"})})]});}export default Reports;","map":{"version":3,"names":["React","useState","useEffect","useRef","Chart","jsx","_jsx","jsxs","_jsxs","Reports","incomeList","setIncomeList","expensesList","setExpensesList","totalIncome","setTotalIncome","totalExpenses","setTotalExpenses","remainingBudget","setRemainingBudget","chartRef","incomeData","JSON","parse","localStorage","getItem","expensesData","reduce","total","item","amount","renderChart","income","expenses","ctx","document","getElementById","current","destroy","type","data","labels","datasets","label","backgroundColor","borderColor","borderWidth","options","responsive","maintainAspectRatio","scales","y","beginAtZero","children","className","style","textAlign","margin","maxWidth","height","id","marginTop","marginBottom","onClick"],"sources":["/Users/gingersgirl/Desktop/GOMYCODE/FINTECH-app1/src/components/Reports.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport Chart from \"chart.js/auto\";\n\nfunction Reports() {\n\tconst [incomeList, setIncomeList] = useState([]);\n\tconst [expensesList, setExpensesList] = useState([]);\n\tconst [totalIncome, setTotalIncome] = useState(0);\n\tconst [totalExpenses, setTotalExpenses] = useState(0);\n\tconst [remainingBudget, setRemainingBudget] = useState(0);\n\tconst chartRef = useRef(null);\n\n\t// Fetch data from localStorage\n\tuseEffect(() => {\n\t\t// Fetch income and expenses lists\n\t\tconst incomeData = JSON.parse(localStorage.getItem(\"incomeList\")) || [];\n\t\tconst expensesData = JSON.parse(localStorage.getItem(\"expensesList\")) || [];\n\n\t\t// Calculate total income and expenses\n\t\tconst totalIncome = incomeData.reduce(\n\t\t\t(total, item) => total + (item.amount || 0),\n\t\t\t0\n\t\t);\n\n\t\tconst totalExpenses = expensesData.reduce(\n\t\t\t(total, item) => total + (item.amount || 0),\n\t\t\t0\n\t\t);\n\n\t\t// Calculate remaining budget\n\t\tconst remainingBudget = totalIncome - totalExpenses;\n\n\t\t// Update states\n\t\tsetIncomeList(incomeData);\n\t\tsetExpensesList(expensesData);\n\t\tsetTotalIncome(totalIncome);\n\t\tsetTotalExpenses(totalExpenses);\n\t\tsetRemainingBudget(remainingBudget);\n\n\t\t// Render chart\n\t\trenderChart(totalIncome, totalExpenses, remainingBudget);\n\t}, []);\n\n\t// Render Chart\n\tconst renderChart = (income, expenses, remainingBudget) => {\n\t\tconst ctx = document.getElementById(\"myChart\");\n\n\t\t// Destroy existing chart\n\t\tif (chartRef.current) {\n\t\t\tchartRef.current.destroy();\n\t\t}\n\n\t\tchartRef.current = new Chart(ctx, {\n\t\t\ttype: \"bar\",\n\t\t\tdata: {\n\t\t\t\tlabels: [\"Income\", \"Expenses\", \"Remaining Budget\"],\n\t\t\t\tdatasets: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: \"Amount (in Ksh)\",\n\t\t\t\t\t\tdata: [income, expenses, remainingBudget],\n\t\t\t\t\t\tbackgroundColor: [\"lightblue\", \"lightcoral\", \"lightgreen\"],\n\t\t\t\t\t\tborderColor: [\"blue\", \"red\", \"green\"],\n\t\t\t\t\t\tborderWidth: 1,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\toptions: {\n\t\t\t\tresponsive: true,\n\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\tscales: {\n\t\t\t\t\ty: {\n\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t{/* Report Card */}\n\t\t\t<div\n\t\t\t\tclassName=\"card\"\n\t\t\t\tstyle={{ textAlign: \"center\", margin: \"20px auto\", maxWidth: \"400px\" }}\n\t\t\t>\n\t\t\t\t<h2>Spending Reports</h2>\n\t\t\t\t<div style={{ height: \"300px\" }}>\n\t\t\t\t\t<canvas id=\"myChart\"></canvas>\n\t\t\t\t</div>\n\n\t\t\t\t<div style={{ marginTop: \"20px\" }}>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<strong>Your Total Income:</strong> {totalIncome} Ksh\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<strong>Your Total Expenses:</strong> {totalExpenses} Ksh\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<strong>Your Remaining Budget:</strong> {remainingBudget} Ksh\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Generate Report Button */}\n\t\t\t<div style={{ textAlign: \"center\", marginBottom: \"20px\" }}>\n\t\t\t\t<button\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\trenderChart(totalIncome, totalExpenses, remainingBudget)\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\tRefresh Report\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Reports;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}